@import "~scss/_vars";

.menus {
	.menuWrap { position: absolute; left: 0px; top: 0px; width: 100%; z-index: 19; }
	.menuWrap.fromPopup { z-index: 103; }

	.dimmer { position: fixed; left: 0px; top: 0px; width: 100%; height: 100%; background: rgba(0,0,0,0); }
	#menu-polygon { z-index: 1000; position: absolute; }

	.menu * { user-select: none; }
	
	.menu { 
		border-radius: 8px; position: absolute; z-index: inherit; text-align: left; backface-visibility: hidden;
		box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.2); background: #fff; opacity: 0; transform: scale3d(0.8,0.8,1);
		transition: opacity 0.05s ease-in-out, transform 0.05s ease-in-out;
	}
	.menu.noAnimation { transition: none; }
	.menu.show { opacity: 1; transform: scale3d(1,1,1); }
	.menu.fixed { position: fixed; }
	.menu * { user-select: none; }
	
	.menu.v1.h3 { transform-origin: 0% 100%; } /* left top */
	.menu.v2.h3 { transform-origin: 0% 0%; } /* left bottom */
	
	.menu.v1.h4 { transform-origin: 100% 100%; } /* right top */
	.menu.v2.h4 { transform-origin: 100% 0%; } /* right bottom */
	
	.menu.v1.h5 { transform-origin: 50% 100%; } /* center top */
	.menu.v2.h5 { transform-origin: 50% 0%; } /* center bottom */
	
	.menu.v5.h3 { transform-origin: 0% 50%; } /* left center */
	.menu.v5.h4 { transform-origin: 100% 50%; } /* right center */
	
	.menu {
		.input { user-select: text; }
	}
	
	.menu.vertical { width: 224px; }
	.menu.vertical {
		.content { overflow-y: auto; max-height: 450px; padding: 8px 0px; border-radius: inherit; transform: none; }
		.ReactVirtualized__Grid__innerScrollContainer { margin: 8px 0px; }

		.loaderWrapper { 
			position: absolute; left: 0px; top: 0px; z-index: 20; width: 100%; height: 100%; border-radius: 12px;
			background: rgba(255,255,255, 0.7);
		}
		
		.filter { padding: 3px 14px 0px 14px; }
		.filter {
			.inner { position: relative; width: 100%; height: 28px; }
			.input { padding: 0px; height: 22px; line-height: 22px; vertical-align: top; border: 0px; width: calc(100% - 24px); }
			.icon.clear { 
				width: 20px; height: 20px; background-image: url('~img/icon/clear0.svg'); position: absolute; right: 0px; top: 0px;
				cursor: pointer; opacity: 0;
			}
			.icon.clear:hover { background-image: url('~img/icon/clear1.svg'); }

			.line { height: 1px; margin: 0px; background: $colorLightGrey; display: block; }
		}
		.filter.active { .icon.clear { opacity: 1; } }

		.inputWrap { padding: 0px 14px 8px 14px; }
		.input { border: 1px solid $colorLightGrey; padding: 0px 8px; }
	
		.title { @include text-small;  margin: 0px; padding: 7px 14px; font-weight: 400; color: $colorDarkGrey; }
	
		.item { 
			padding: 4px 14px; font-size: 14px; line-height: 20px; letter-spacing: 0.2px; position: relative; cursor: pointer; 
			width: 100%; background: #fff;
		}
		.item.isDragging { box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.2); }
		.item.isReadOnly { cursor: default; }
		
		.item::before {
			content: ""; position: absolute; left: 0px; top: 0px; width: 100%; height: 100%; background: rgba(172, 169, 150, 0); z-index: 1;
			transition: background 0.2s ease-in-out; pointer-events: none;
		}
		.item.hover::before { background: rgba(172, 169, 150, 0.15); }
		.item.hover, .item:hover {
			.icon.delete, .icon.more { opacity: 1; }
		}
		.item.isReadOnly.hover::before { opacity: 0; }

		.item.active::before { background: rgba(172, 169, 150, 0.15); z-index: 0; }
		.item.active {
			.name { z-index: 1; }
		}

		.item.add { color: $colorDarkGrey; line-height: 20px; }
		.item.add:hover { color: $colorBlack; }
		.item.add:hover {
			.icon.plus { background-image: url('~img/icon/plus/menu1.svg'); }
		}
		
		.item {
			.name { display: inline-block; vertical-align: top; position: relative; }

			.icon { width: 20px; height: 20px; margin-right: 6px; vertical-align: top; transition: none; flex-shrink: 0; }
			.icon.dnd { width: 20px; height: 20px; background-image: url('~img/icon/dnd.svg'); margin: 0px; vertical-align: top; cursor: grab; }
			.icon.plus { margin-right: 4px; background-image: url('~img/icon/plus/menu0.svg'); }
			.icon.delete, .icon.more { 
				width: 24px; height: 24px; background-size: 20px; cursor: pointer; position: absolute; right: 10px; top: 50%; 
				margin: -12px 0px 0px 0px; border-radius: 4px; opacity: 0; z-index: 1;
			}
			.icon.delete { background-image: url('~img/icon/menu/delete.svg'); }
			.icon.delete:hover, .icon.more:hover { background-color: rgba(172, 169, 150, 0.15); }
			.icon.arrow { position: absolute; right: 10px; top: 50%; margin: -10px 0px 0px 0px; background-image: url('~img/arrow/menu.svg'); }

			.buttons { flex-shrink: 0; margin-top: -2px; }
			.buttons {
				.icon { position: static; margin: 0px; }
			}
			
			.iconObject { margin-right: 4px; vertical-align: top; flex-shrink: 0; }
		}

		.item.empty { color: $colorDarkGrey; }
		
		.item.withDescription { padding: 8px 14px; height: 56px; }
		.item.withDescription {
			.icon, .iconObject { width: 40px; height: 40px; border-radius: 6px; position: absolute; left: 14px; top: 8px; }
			.descr { @include text-small; height: 18px; color: #6c6a5f; }
			.descr:empty { display: none; }
			.info { padding-left: 52px; line-height: 40px; }
			.name { line-height: 22px; }
		}

		.item.withCaption { display: flex; }
		.item.withCaption {
			.iconObject, .icon.dnd { flex-shrink: 0; }
			.name { width: 100%; margin-right: 6px; }

			.clickable { width: calc(100% - 108px); margin-right: 6px; display: flex; }
			.clickable {
				.name { margin: 0px; width: 100%; }
			}

			.caption { 
				width: 80px; @include text-overflow-nw; display: inline-block; vertical-align: top; color: $colorDarkGrey; @include text-small; text-align: right;
				flex-shrink: 0;
			}
		}

		.line { height: 1px; margin: 8px 14px; background: $colorLightGrey; }
		.input { border-radius: 4px; }

		.sectionName { padding: 5px 14px; @include text-very-small; font-weight: 500; }
		
		.section { padding: 8px 0px 0px 0px; }
		.section::after {
			content: ""; height: 1px; margin: 8px 14px 0px 14px; background: $colorLightGrey; display: block;
		}
		.section:first-child { padding: 0px; }
		.section:last-child { border: 0px; }
		.section:last-child::after { display: none; }
		.section > .name { padding: 3px 14px; margin-bottom: 2px; @include text-very-small; display: block; font-weight: 500; }
	}

	.menu.horizontal {
		.content { display: flex; }
		.section { flex: auto; padding: 12px 18px; height: 44px; border-right: 1px solid $colorLightGrey; white-space: nowrap; position: relative; }
		.section:last-child { border: 0px; }
		
		.icon { width: 20px; height: 20px; margin-right: 12px; cursor: pointer; }
		.icon:last-child { margin: 0px; }
		
		.icon {
			.icon.arrow { 
				width: 8px; height: 8px; background-image: url('~img/icon/menu/action/arrow0.svg'); position: absolute; right: 0px; top: 50%; 
				margin-top: -4px; background-size: contain;
			}
		}
		.icon.active {
			 .icon.arrow { background-image: url('~img/icon/menu/action/arrow1.svg'); }
		}
	}

	.menu.orange {
		.item.active { color: #e89d00; }
		.item.active::before { opacity: 1; background: #fef3c5; color: #e89d00; }
	}
}