@import "~scss/_vars";

.blocks {
	.block { @include text-paragraph; word-break: break-word; display: flex; flex: auto; position: relative; margin: 0px 0px 2px 0px; }
	.block {
		.wrapMenu { width: 48px; text-align: right; position: relative; }
		.wrapContent { width: calc(100% - 48px); position: relative; }
		
		.flex { position: relative; z-index: 2; }
		.icon.dnd { 
			width: 12px; height: 100%; background-size: 20px 20px; opacity: 0; cursor: grab; position: absolute; right: 2px; top: 0px;
			background-image: url('~img/icon/block/menu0.svg'); border: 1px solid $colorLightGrey; border-radius: 12px; box-shadow: 0px 0px;
		}
		.icon.dnd:hover { 
			background-image: url('~img/icon/block/menu1.svg'); border-color: $colorOrange; 
			box-shadow: 0px 0px 0px 1px $colorOrange inset;
		}
		
		.colResize { width: 0px; position: relative; opacity: 0; z-index: 10; }
		.colResize.active { opacity: 1; }
		.colResize {
			.inner { 
				position: absolute; left: 19px; top: -15px; width: 8px; height: calc(100% + 30px); cursor: col-resize; z-index: 1; 
			}
			.line { 
				height: 100%; width: 2px; background: $colorDarkGrey; position: absolute; left: 50%; top: 0px; margin-left: -1px; 
				border-radius: 2px;
			}
		}
		
		.selectionOver { 
			position: absolute; left: 0px; top: 0px; width: 100%; height: 100%; background: Highlight; opacity: 0.35;
			display: none; pointer-events: none; z-index: 10;
		}

		/*
		.menuOver { 
			position: absolute; left: -24px; top: 0px; width: calc(100% + 24px); height: 100%; background: rgba(172,169,150,0.15);
			pointer-events: none; z-index: -1; border-radius: 8px; opacity: 0; transition: opacity 0.2s ease-in-out;
		}
		*/
		
		.focusable { border-radius: inherit; }
		
		.emptyToggle { 
			display: none; margin-left: 28px; color: $colorDarkGrey; position: relative; z-index: 2; cursor: pointer;
			transition: $transitionFast; 
		}
		.emptyToggle:hover { color: $colorBlack; }
	}

	.block > .wrapContent > .children > .block.last { margin: 0px; }
	
	.block.align0 > .wrapContent { text-align: left; }
	.block.align1 > .wrapContent { text-align: center; }
	.block.align2 > .wrapContent { text-align: right; }
	
	.block.isResizing { cursor: col-resize; user-select: none; }
	.block.isResizing {
		.icon.dnd { display: none; }
	}
	
	.block.isAdding.top::before {
		content: ""; display: block; width: calc(100% - 48px); height: 2px; background: $colorOrange; position: absolute; right: 0px; top: -2px;
	}
	
	.block.isAdding.bottom::after {
		content: ""; display: block; width: calc(100% - 48px); height: 2px; background: $colorOrange; position: absolute; right: 0px; bottom: -2px;
	}
	
	.block:hover > .wrapMenu > .icon.dnd, 
	.block.showMenu > .wrapMenu > .icon.dnd, 
	{ opacity: 1; }

	.block.showMenu > .wrapContent > .selectable > .menuOver { opacity: 1; }
	.block.showMenu > .wrapContent > .selectable > .selectionOver { border-radius: 0px 8px 8px 0px; }
	.block.showMenu > .wrapContent.bgColor { border-radius: 0px 8px 8px 0px; }

	.block.isAdding.top > .wrapContent > .selectable > .dropTarget { border-radius: 0px 0px 4px 4px !important; }
	.block.isAdding.bottom > .wrapContent > .selectable > .dropTarget { border-radius: 4px 4px 0px 0px !important; }

	.block > .wrapContent > .children.canToggle { display: none; }
	.block.isToggled > .wrapContent > .children { display: block; }
	.block.isToggled > .wrapContent > .emptyToggle { display: block; }
	.block.isToggled > .wrapContent > .selectable > .dropTarget > .flex > .markers > .marker.toggle { transform: rotateZ(90deg); }
	
	.block.isDragging > .wrapContent > .selectable > .dropTarget { opacity: 0.3; }

	.block > .wrapContent > .selectable.isSelected > .selectionOver { display: block; }
	.block > .wrapContent > .selectable.isSelected { 
		.placeHolder { display: none !important; } 
	}
	
	.block.blockIconPage > .wrapMenu { visibility: hidden; }
	.block.blockIconUser > .wrapMenu { visibility: hidden; }

	// Remove padding for first block after title
	.block.index-1 { padding-top: 0px !important; }
	#block-div-1 > .wrapContent > .children > .block.first { padding-top: 0px !important; }
}

.dragProvider.isDragging {
	.block > .wrapContent > .selectable > .menuOver { opacity: 1; }
	.block > .wrapContent > .selectable > .selectionOver { display: none; }
	.block > .wrapMenu > .icon.dnd { opacity: 1; }
}